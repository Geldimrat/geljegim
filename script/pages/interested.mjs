const questions = {
    interested: [
        {
            name: 'Zatlar:',
            tests: [
                {
                    q: '1. Men kitap okamakdan başga zatlary etmegi gowy hasaplaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '2. Men elim bilen iş etmegi halaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '3. Men bir zady bezemekden, döretmekden we ýasamakdan lezzet alýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '4. Men gurallar we esbaplar bilen işlemegi halaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '5. Men islendik zady böleklere bölüp ýa-da ony açyp nähili işleýändigini bilmek isleýärin.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '6. Men adamlar bilen işlänimden maşynlar ýa-da gurallar bilen işlänänimi gowy görýärin.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '7. Men zatlary gurmakdan we düzetmekden lezet alýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '8. Men dürli gurallaryň nähili ulanylýandygyny öwrenmekden lezzet alýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
            ]
        },
        {
            name: 'Maglumat',
            tests: [
                {
                    q: '1. Men logiki oýunlary oýnamagy halaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '2. Men täze temalary okamagy we öwrenmegi halaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '3. Meseläni çözmezden ozal şol barada ähli faktlary öwrenmegi makul bilýärin.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '4. Men özümi aýdym aýtmagyň, surat çekmegiň ýa-daýazmagyň üsti bilen tanyşdyrmakdan lezzet alýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '5. Täze faktlary we pikirleri öwrenmegi halaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '6. Men proýeklar ýa-da täze bir gözleg işi  bilen işlänimde şol proýekt barada maglumat gözlemekden lezzet alýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '7. Men dürli zatlar barada pikirlenmegi we olary nähili ýol bilen çözüp bolýanlygy barada öwrenmegi halaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '8. Ýazmaça görkezmeler arkaly iş etmek meniň üçin ýeňil.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                }
            ]
        },
        {
            name: 'Adamlar',
            tests: [
                {
                    q: '1. Eger adamlara meniň kömegim gerek bolsa men olara kömek etmegi halaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '2. Men adamlardan ybarat bolan toparyň ýolbaşçysy ýa-da lideri bolmak isleýärin.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '3. Men adamlar barada alada etmegi halaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '4. Men adamlar bilen işlemegi halaýaryn şol sebäpli adamlar bilen işleşilýän iş isleýärin.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '5. Başga adamlar bilen has ýakyn bolmagym bu meniň tebigy häsiýetimdir.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '6. Adatça adamlary öz isleýşim ýaly etdirmäne yryp bilerin.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '7. Adamlar bilen bile bolamgy halaýarun.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                },
                {
                    q: '8. Men adamlaryň pikirlerini eşitmegi halaýaryn.',
                    a1: 'Hawa',
                    a2: 'Ýok',
                    sy: false,
                    sn: false,
                }
            ]
        },
    ]
}


const answers = {
    interested: [
        {
            name: questions.interested[0].name,
            text: 'Siz gurallar we maşynlar bilen işlemegi, öz elleriňiz bilen zatlary ýasamagy, gurallary düzetmegi we tehniki hyzmat etmegi ýa-da gurallaryň we esbaplaryň nähili işleýşini bilmek isleýärsiňiz. Size iň gowy işler:',
            img: 'things.png',
            jobs: ['Izinerçilik', 'Önüm öndürmek', 'Gurlyşykçy', 'Ussa', 'Söwda', 'Tehnologiýalar bilen işlenýän adam']
        },
        {
            name: questions.interested[1].name,
            text: 'Siz özüňizi ýazmak ýa-da aýdym arkaly tanyşdyrmagy, gözlegler ýa-da tejribeler geçirmgi, meseleleri çözmegi, okamagy we ýazmagy halaýarsyňyz. Size has gowy işler:',
            img: 'info.png',
            jobs: ['Sungat işgäri', 'Işewirlik we maliýa', 'Ylmy gözleg bilen meşgullanmak', 'Satmak we hyzmat etmek', 'Hukukçy', 'Hökümeti dolandyryjy']
        },
        {
            name: questions.interested[2].name,
            text: 'Başgalar hakda alada etmegi we olara kömek etmegi, adamlary höweslendirmegi, toparyň bir bölegi hökmünde işlemegi we başgalara ýolbaşçylyk etmegi we gözegçilik etmegi halaýarsyňyz. <br/> Size has gowy işler:',
            img: 'people.png',
            jobs: ['Saglygy goraýyşda', 'Bilim edaralarynda işlemek', 'Jemgyýetçilik işinde', 'Maslahat berişde']
        }
    ]
}



let testsCards = document.getElementById('tests_cards');

function testContent() {
    let testsCardsContent = ''

    let testCardsName = ''
    let testCardsQuestion = ''
    for (let i = 0; i < questions.interested.length; i++) {
        testCardsName += `<p class="cat_name">${questions.interested[i].name}</p>`
        for (let j = 0; j < questions.interested[i].tests.length; j++) {
            testCardsQuestion += `
                <div class="card_item">
                    <p class="test_q">${questions.interested[i].tests[j].q}</p>
                    <ul class="test_ans">
                        <li onclick="testAnswerYes(${i}, ${j})" class="${questions.interested[i].tests[j].sy ? 'checked' : ''}" id="yes">hawa</li>
                        <li onclick="testAnswerNo(${i}, ${j})" class="${questions.interested[i].tests[j].sn ? 'checked' : ''}" id="no">yok</li>
                    </ul>
            </div>
            `
        }
        testsCardsContent += (testCardsName + testCardsQuestion);
        testCardsName = ''
        testCardsQuestion = ''
    }

    testsCards.innerHTML = testsCardsContent
}

testContent()



let things = 0
let information = 0
let people = 0


let resultBtn = document.getElementById('result_btn')

function testAnswerYes(i, j) {
    questions.interested[i].tests[j].sy = true
    questions.interested[i].tests[j].sn = false

    testContent()
    resultBtn.classList.remove('hide')

    switch (questions.interested[i].name) {
        case questions.interested[0].name:
            things += 1
            break;
        case questions.interested[1].name:
            information += 1
            break;
        case questions.interested[2].name:
            people += 1
            break;
    }
}


function testAnswerNo(i, j) {
    questions.interested[i].tests[j].sy = false
    questions.interested[i].tests[j].sn = true

    testContent()
    resultBtn.classList.remove('hide')
}


let result = []

let interested = document.getElementById('interested')
let resultContent = document.getElementById('result')



function showResult_fn() {
    result.push({ name: questions.interested[0].name, count: things });
    result.push({ name: questions.interested[1].name, count: information });
    result.push({ name: questions.interested[2].name, count: people });


    result.sort(function (a, b) { return a.count - b.count });

    let newResult = {}

    for (let i = 0; i < answers.interested.length; i++) {
        if (result[result.length - 1].name == answers.interested[i].name) {
            newResult = answers.interested[i]
        }
    }

    let jobsArr = newResult.jobs
    let jobs = ''
    for (let i = 0; i < jobsArr.length; i++) {
        jobs += `<li>${jobsArr[i]}</li>`
    }


    let userName = ''
    if (localStorage.getItem('user')) {
        let user = JSON.parse(localStorage.getItem('user'))
        userName = `${user.name} ${user.surname}`
    }


    interested.classList.add('hide')
    resultContent.classList.remove('hide')

    resultContent.innerHTML = `
            <div class="content">
                <p class="result_title">Synag netijesi:</p>
                <div class="interested_result_content">
                        <p class="name"><span class="username">${userName}</span>, Siz "${newResult.name}" bilen gyzyklanyan owreniji.</p>
                        <div class="sides">
                            <div class="left">
                                <img src="./../../assets/images/${newResult.img}" alt="" />
                            </div>
                            <div class="right">
                                <p class="text">${newResult.text}</p>
                                <ul>${jobs}</ul>
                            </div>
                        </div>
                </div>
            </div>
    `

    result = []
}


let docTitle = document.title
window.addEventListener("blur", () => {
    document.title = "Come back :("
})

window.addEventListener("focus", () => {
    document.title = docTitle
})








function onload_fn() {
    if (localStorage.getItem("user") == null) {
        window.location = "http://127.0.0.1:5500/index%20.html";
    }
}